{% extends "base.html" %}

{% block title %}
  Загрузите файлы и получите на них короткие ссылки
{% endblock title %}

{% block content %}
  <form method="POST" enctype="multipart/form-data" novalidate>
    {{ form.csrf_token }}
    {{ form.files(class="form-control form-control-lg py-2 mb-3", multiple=True, placeholder=form.files.label.text) }}
    {% if form.files.errors %}
      <p class="text-danger mb-3">
        {% for error in form.files.errors %}
          {{ error }}
        {% endfor %}
      </p>
    {% endif %}
    <div class="text-center">
      {{ form.submit(class="btn btn-primary px-5 py-2") }}
    </div>
  </form>

  {% if error_messages %}
    <div class="mt-4 text-center">
      {% for message in error_messages %}
        <h5 class="text-center text-danger">
          {{ message }}
        </h5>
      {% endfor %}
    </div>
  {% endif %}

  {% if result_links %}
    <table class="table table-striped mt-4">
      <thead>
        <tr>
          <th scope="col">Имя файла</th>
          <th scope="col">Короткая ссылка</th>
        </tr>
      </thead>
      <tbody>
        {% for item in result_links %}
          <tr>
            <td>{{ item.filename }}</td>
            <td>
              <a href="{{ item.url }}">{{ item.url }}</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock content %}
